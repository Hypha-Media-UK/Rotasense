/* RotaSense - Modern CSS System */

/* CSS Cascade Layers for organized styling */
@layer reset, tokens, layout, components, utilities;

/* ===== RESET LAYER ===== */
@layer reset {
  /* Modern CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  * {
    margin: 0;
  }

  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  img, picture, video, canvas, svg {
    display: block;
    max-width: 100%;
  }

  input, button, textarea, select {
    font: inherit;
  }

  p, h1, h2, h3, h4, h5, h6 {
    overflow-wrap: break-word;
  }

  #root, #__next, #app {
    isolation: isolate;
  }
}

/* ===== DESIGN TOKENS LAYER ===== */
@layer tokens {
  :root {
    /* Color System - OKLCH for better perceptual uniformity */
    --color-primary: oklch(0.6 0.15 250);
    --color-primary-hover: oklch(0.55 0.15 250);
    --color-primary-light: oklch(0.95 0.03 250);

    --color-secondary: oklch(0.7 0.12 180);
    --color-secondary-hover: oklch(0.65 0.12 180);

    --color-success: oklch(0.65 0.15 140);
    --color-warning: oklch(0.75 0.15 60);
    --color-error: oklch(0.6 0.18 20);

    /* Neutral Colors */
    --color-white: oklch(1 0 0);
    --color-gray-50: oklch(0.98 0 0);
    --color-gray-100: oklch(0.95 0 0);
    --color-gray-200: oklch(0.9 0 0);
    --color-gray-300: oklch(0.8 0 0);
    --color-gray-400: oklch(0.65 0 0);
    --color-gray-500: oklch(0.5 0 0);
    --color-gray-600: oklch(0.4 0 0);
    --color-gray-700: oklch(0.3 0 0);
    --color-gray-800: oklch(0.2 0 0);
    --color-gray-900: oklch(0.1 0 0);

    /* Semantic Color Assignments */
    --color-background: var(--color-white);
    --color-surface: var(--color-gray-50);
    --color-surface-elevated: var(--color-white);
    --color-border: var(--color-gray-200);
    --color-border-hover: var(--color-gray-300);

    --color-text: var(--color-gray-800);
    --color-text-secondary: var(--color-gray-600);
    --color-text-muted: var(--color-gray-500);
    --color-text-inverse: var(--color-white);

    /* Typography Scale - Fluid Typography (Reduced) */
    --font-size-xs: clamp(0.625rem, 0.6rem + 0.125vw, 0.75rem);
    --font-size-sm: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
    --font-size-base: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
    --font-size-lg: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
    --font-size-xl: clamp(1.125rem, 1rem + 0.625vw, 1.25rem);
    --font-size-2xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
    --font-size-3xl: clamp(1.5rem, 1.3rem + 1vw, 2rem);

    /* Font Families */
    --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-mono: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;

    /* Font Weights */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Spacing Scale - Consistent spacing system */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 0.75rem;
    --space-lg: 1rem;
    --space-xl: 1.5rem;
    --space-2xl: 2rem;
    --space-3xl: 3rem;
    --space-4xl: 4rem;

    /* Border Radius - Removed for clean design */
    --radius-sm: 0;
    --radius-md: 0;
    --radius-lg: 0;
    --radius-xl: 0;
    --radius-2xl: 0;
    --radius-full: 0;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 oklch(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px oklch(0 0 0 / 0.1), 0 2px 4px -2px oklch(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px oklch(0 0 0 / 0.1), 0 4px 6px -4px oklch(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px oklch(0 0 0 / 0.1), 0 8px 10px -6px oklch(0 0 0 / 0.1);

    /* Transitions */
    --transition-fast: 150ms ease;
    --transition-normal: 250ms ease;
    --transition-slow: 350ms ease;

    /* Z-Index Scale */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;

    /* Container Sizes */
    --container-sm: 640px;
    --container-md: 768px;
    --container-lg: 1024px;
    --container-xl: 1280px;
    --container-2xl: 1536px;
  }

  /* Dark mode support (future enhancement) */
  @media (prefers-color-scheme: dark) {
    :root {
      --color-background: var(--color-gray-900);
      --color-surface: var(--color-gray-800);
      --color-surface-elevated: var(--color-gray-700);
      --color-border: var(--color-gray-700);
      --color-border-hover: var(--color-gray-600);

      --color-text: var(--color-gray-200);
      --color-text-secondary: var(--color-gray-300);
      --color-text-muted: var(--color-gray-400);
    }
  }
}

/* ===== LAYOUT LAYER ===== */
@layer layout {
  html {
    font-family: var(--font-sans);
    font-size: 14px; /* Smaller base font size */
    line-height: 1.5;
    color: var(--color-text);
    background-color: var(--color-background);
  }

  body {
    min-height: 100vh;
    min-height: 100dvh;
  }

  /* Main App Container */
  #app {
    min-height: 100vh;
    min-height: 100dvh;
    display: grid;
    grid-template-rows: auto 1fr;
    container-type: inline-size;
  }

  /* Main Content Area */
  main {
    padding: var(--space-2xl) var(--space-md) var(--space-md);
    max-width: var(--container-xl);
    margin-inline: auto;
    width: 100%;
    container-type: inline-size;
  }

  /* Responsive Container Queries */
  @container (max-width: 768px) {
    main {
      padding: var(--space-xl) var(--space-sm) var(--space-sm);
    }
  }
}

/* ===== COMPONENTS LAYER ===== */
@layer components {
  /* Header Component */
  header {
    background-color: var(--color-surface-elevated);
    border-bottom: 1px solid var(--color-border);
    padding: var(--space-md) var(--space-lg);
    position: sticky;
    top: 0;
    z-index: var(--z-sticky);
    backdrop-filter: blur(8px);
    background-color: color-mix(in oklch, var(--color-surface-elevated) 95%, transparent);
  }

  header h1 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    margin: 0;
  }

  header nav {
    display: flex;
    gap: var(--space-lg);
    align-items: center;
  }

  header nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: var(--font-weight-medium);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    transition: all var(--transition-fast);
  }

  header nav a:hover,
  header nav a.active {
    color: var(--color-primary);
    background-color: var(--color-primary-light);
  }

  /* Article and Section Components */
  article {
    background-color: var(--color-surface-elevated);
    border: 1px solid var(--color-border);
    overflow: hidden;
    container-type: inline-size;
  }

  article > header {
    background-color: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    padding: var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-md);
    position: static;
    backdrop-filter: none;
  }

  article > header h1,
  article > header h2,
  article > header h3 {
    margin: 0;
    font-weight: var(--font-weight-semibold);
  }

  article > section,
  article > div:not(header):not(footer) {
    padding: var(--space-lg);
  }

  article > footer {
    background-color: var(--color-surface);
    border-top: 1px solid var(--color-border);
    padding: var(--space-lg);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-md);
  }

  /* Section Components */
  section {
    margin-bottom: var(--space-xl);
  }

  section > h2,
  section > h3,
  section > h4 {
    margin-bottom: var(--space-md);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
  }

  /* Navigation Components */
  nav {
    display: flex;
    gap: var(--space-sm);
    flex-wrap: wrap;
  }

  nav button,
  nav a {
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--color-border);
    background-color: var(--color-surface);
    color: var(--color-text-secondary);
    text-decoration: none;
    border-radius: var(--radius-md);
    font-weight: var(--font-weight-medium);
    transition: all var(--transition-fast);
    cursor: pointer;
  }

  nav button:hover,
  nav a:hover,
  nav button.active,
  nav a.active {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    border-color: var(--color-primary);
  }

  /* Button Components - Enhanced Touch Targets */
  button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    padding: var(--space-md) var(--space-lg);
    min-height: 44px; /* Minimum touch target size */
    min-width: 44px;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background-color: var(--color-surface-elevated);
    color: var(--color-text);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
    text-decoration: none;
    position: relative;
  }

  button:hover {
    background-color: var(--color-surface);
    border-color: var(--color-border-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }

  button:active {
    transform: translateY(0);
    box-shadow: none;
  }

  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Primary Button Variant */
  button:where(.btn-primary, [type="submit"]) {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    border-color: var(--color-primary);
  }

  button:where(.btn-primary, [type="submit"]):hover {
    background-color: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
  }

  /* Danger Button Variant */
  button.btn-danger {
    background-color: var(--color-error);
    color: var(--color-text-inverse);
    border-color: var(--color-error);
  }

  button.btn-danger:hover {
    background-color: color-mix(in oklch, var(--color-error) 90%, black);
    border-color: color-mix(in oklch, var(--color-error) 90%, black);
  }

  /* Form Components */
  form {
    display: grid;
    gap: var(--space-lg);
  }

  fieldset {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--space-lg);
    margin: 0;
  }

  legend {
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    padding: 0 var(--space-sm);
  }

  label {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
  }

  input,
  textarea,
  select {
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background-color: var(--color-surface-elevated);
    color: var(--color-text);
    transition: border-color var(--transition-fast);
  }

  input:focus,
  textarea:focus,
  select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px color-mix(in oklch, var(--color-primary) 20%, transparent);
  }

  /* List Components */
  ul, ol {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  ul {
    display: grid;
    gap: var(--space-sm);
  }

  li {
    padding: var(--space-md);
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-md);
  }

  /* Definition List Components */
  dl {
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: max-content 1fr;
    align-items: center;
  }

  dt {
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
  }

  dd {
    margin: 0;
    color: var(--color-text);
  }

  /* Time and Data Components */
  time {
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    background-color: var(--color-surface);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
  }

  data {
    font-weight: var(--font-weight-medium);
    color: var(--color-primary);
  }

  /* Modal/Dialog Components */
  dialog {
    border: 2px solid var(--color-border);
    padding: 0;
    background-color: var(--color-surface-elevated);
    box-shadow: var(--shadow-xl);
    max-width: 90vw;
    max-height: 90vh;
    overflow: hidden;
  }

  dialog::backdrop {
    background-color: oklch(0 0 0 / 0.5);
    backdrop-filter: blur(4px);
  }

  dialog > header {
    background-color: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    padding: var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  dialog > main {
    padding: var(--space-lg);
    overflow-y: auto;
  }

  dialog > footer {
    background-color: var(--color-surface);
    border-top: 1px solid var(--color-border);
    padding: var(--space-lg);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-md);
  }

  /* Grid Layout Components */
  .grid {
    display: grid;
    gap: var(--space-lg);
  }

  .grid-auto {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }

  .grid-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .grid-3 {
    grid-template-columns: repeat(3, 1fr);
  }

  /* Container Queries for Responsive Grids */
  @container (max-width: 768px) {
    .grid-2,
    .grid-3 {
      grid-template-columns: 1fr;
    }
  }

  /* Status Light Components */
  .status-light {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
    border: 2px solid var(--color-surface-elevated);
    box-shadow: 0 0 0 1px var(--color-border);
    transition: all var(--transition-fast);
  }

  .status-light.status-operational {
    background-color: var(--color-success);
    box-shadow: 0 0 0 2px var(--color-surface-elevated), 0 0 0 3px color-mix(in oklch, var(--color-success) 30%, transparent);
  }

  .status-light.status-understaffed {
    background-color: var(--color-error);
    box-shadow: 0 0 0 2px var(--color-surface-elevated), 0 0 0 3px color-mix(in oklch, var(--color-error) 30%, transparent);
  }

  .status-light.status-closed {
    background-color: var(--color-text-muted);
    box-shadow: 0 0 0 2px var(--color-surface-elevated), 0 0 0 3px color-mix(in oklch, var(--color-text-muted) 30%, transparent);
  }

  /* Status Badge Base Styles */
  .status-badge {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    padding: 0;
    background: none;
    border: none;
  }

  .status-scheduled {
    color: var(--color-warning);
  }

  .status-active {
    color: var(--color-success);
  }

  .status-off-duty {
    color: var(--color-text-muted);
  }

  .status-absent {
    color: var(--color-error);
  }

  /* Card Layout Components */
  .card-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-md);
  }

  .card-title-row h3 {
    margin: 0;
    flex: 1;
  }

  .capacity-text {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    white-space: nowrap;
  }

  .staff-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-sm);
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
  }

  /* Night staff styling */
  .staff-item.night-staff {
    background-color: color-mix(in oklch, var(--color-surface) 95%, var(--color-primary));
    border-left: 3px solid var(--color-primary);
  }

  /* Shift time dividers */
  .shift-divider {
    height: 1px;
    background-color: var(--color-border);
    margin: var(--space-md) 0;
    position: relative;
  }

  .shift-divider::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 1px;
    background-color: var(--color-primary);
  }

  /* Day/Night divider within same shift time */
  .day-night-divider {
    height: 1px;
    background-color: color-mix(in oklch, var(--color-border) 50%, transparent);
    margin: var(--space-sm) var(--space-md);
  }

  .staff-name {
    flex: 1;
    font-weight: var(--font-weight-medium);
  }

  .empty-state {
    text-align: center;
    padding: var(--space-lg);
    color: var(--color-text-muted);
    font-style: italic;
  }

  /* Home View Specific Styling */
  .home-view {
    max-width: none;
    background: none;
    border: none;
  }

  .page-header {
    background: none;
    border: none;
    border-bottom: 1px solid var(--color-border);
    padding: 0;
    margin-bottom: var(--space-2xl);
  }

  .content-section {
    margin-bottom: var(--space-2xl);
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .content-section > h2 {
    margin: 0 0 var(--space-xl) 0;
    color: var(--color-text);
    font-weight: var(--font-weight-semibold);
    text-align: center;
    font-size: var(--font-size-xl);
  }

  .cards-container {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
    container-type: inline-size;
  }

  /* Config View Specific Styling */
  .config-view {
    max-width: none;
    background: none;
    border: none;
  }

  /* Config Content Styling */
  .config-content {
    background: none;
    border: none;
    margin-bottom: var(--space-2xl);
  }

  .content-header {
    background: none;
    border: none;
    padding: var(--space-xl) 0;
    margin-bottom: var(--space-xl);
    border-bottom: 1px solid var(--color-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-lg);
  }

  .content-header h2 {
    margin: 0;
    color: var(--color-text);
    font-weight: var(--font-weight-semibold);
    text-align: center;
    font-size: var(--font-size-xl);
    flex: 1;
  }

  .header-actions {
    display: flex;
    gap: var(--space-md);
    align-items: center;
  }

  /* Staff Header Layout */
  .staff-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--space-xl);
    gap: var(--space-lg);
  }

  .staff-header > .btn-primary {
    flex-shrink: 0;
  }

  /* Staff Tabs Styling */
  .staff-tabs {
    background: none;
    border: none;
    padding: 0;
    display: flex;
    justify-content: flex-start;
    gap: var(--space-xs);
    flex: none;
  }

  .staff-tabs button {
    padding: var(--space-md) var(--space-lg);
    background-color: var(--color-surface);
    color: var(--color-text-secondary);
    border: 1px solid var(--color-border);
    border-bottom: none;
    font-weight: var(--font-weight-medium);
    transition: all var(--transition-fast);
    text-align: center;
    border-top-left-radius: var(--radius-md);
    border-top-right-radius: var(--radius-md);
    position: relative;
    top: 1px;
  }

  .staff-tabs button:hover {
    background-color: var(--color-surface-elevated);
    color: var(--color-text);
    transform: translateY(-1px);
  }

  .staff-tabs button.active {
    background-color: var(--color-surface-elevated);
    color: var(--color-primary);
    font-weight: var(--font-weight-semibold);
    border-bottom: 1px solid var(--color-surface-elevated);
    z-index: 1;
  }

  /* Staff Status Indicators */
  .staff-active {
    border-left: 4px solid var(--color-success);
  }

  .staff-scheduled {
    border-left: 4px solid var(--color-warning);
  }

  .staff-off-duty {
    border-left: 4px solid var(--color-text-muted);
  }

  .staff-absent {
    border-left: 4px solid var(--color-error);
  }

  /* Day Navigation Components */
  .day-selected {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    border-color: var(--color-primary);
  }

  .day-today {
    border-color: var(--color-primary);
    color: var(--color-primary);
    font-weight: var(--font-weight-semibold);
  }
}

/* ===== UTILITIES LAYER ===== */
@layer utilities {
  /* Spacing Utilities */
  .p-0 { padding: 0; }
  .p-sm { padding: var(--space-sm); }
  .p-md { padding: var(--space-md); }
  .p-lg { padding: var(--space-lg); }
  .p-xl { padding: var(--space-xl); }

  .m-0 { margin: 0; }
  .m-sm { margin: var(--space-sm); }
  .m-md { margin: var(--space-md); }
  .m-lg { margin: var(--space-lg); }
  .m-xl { margin: var(--space-xl); }

  .mb-sm { margin-bottom: var(--space-sm); }
  .mb-md { margin-bottom: var(--space-md); }
  .mb-lg { margin-bottom: var(--space-lg); }
  .mb-xl { margin-bottom: var(--space-xl); }

  /* Text Utilities */
  .text-xs { font-size: var(--font-size-xs); }
  .text-sm { font-size: var(--font-size-sm); }
  .text-base { font-size: var(--font-size-base); }
  .text-lg { font-size: var(--font-size-lg); }
  .text-xl { font-size: var(--font-size-xl); }
  .text-2xl { font-size: var(--font-size-2xl); }
  .text-3xl { font-size: var(--font-size-3xl); }

  .font-normal { font-weight: var(--font-weight-normal); }
  .font-medium { font-weight: var(--font-weight-medium); }
  .font-semibold { font-weight: var(--font-weight-semibold); }
  .font-bold { font-weight: var(--font-weight-bold); }

  .text-center { text-align: center; }
  .text-left { text-align: left; }
  .text-right { text-align: right; }

  /* Color Utilities */
  .text-muted { color: var(--color-text-muted); }
  .text-secondary { color: var(--color-text-secondary); }
  .text-primary { color: var(--color-primary); }
  .text-success { color: var(--color-success); }
  .text-warning { color: var(--color-warning); }
  .text-error { color: var(--color-error); }

  /* Display Utilities */
  .hidden { display: none; }
  .block { display: block; }
  .inline { display: inline; }
  .inline-block { display: inline-block; }
  .flex { display: flex; }
  .grid { display: grid; }

  /* Flexbox Utilities */
  .flex-col { flex-direction: column; }
  .flex-row { flex-direction: row; }
  .items-center { align-items: center; }
  .items-start { align-items: flex-start; }
  .items-end { align-items: flex-end; }
  .justify-center { justify-content: center; }
  .justify-between { justify-content: space-between; }
  .justify-end { justify-content: flex-end; }
  .gap-sm { gap: var(--space-sm); }
  .gap-md { gap: var(--space-md); }
  .gap-lg { gap: var(--space-lg); }

  /* Border Utilities */
  .border { border: 1px solid var(--color-border); }
  .border-t { border-top: 1px solid var(--color-border); }
  .border-b { border-bottom: 1px solid var(--color-border); }
  .border-l { border-left: 1px solid var(--color-border); }
  .border-r { border-right: 1px solid var(--color-border); }

  .rounded { border-radius: var(--radius-md); }
  .rounded-sm { border-radius: var(--radius-sm); }
  .rounded-lg { border-radius: var(--radius-lg); }
  .rounded-xl { border-radius: var(--radius-xl); }
  .rounded-full { border-radius: var(--radius-full); }

  /* Shadow Utilities */
  .shadow-sm { box-shadow: var(--shadow-sm); }
  .shadow-md { box-shadow: var(--shadow-md); }
  .shadow-lg { box-shadow: var(--shadow-lg); }
  .shadow-xl { box-shadow: var(--shadow-xl); }
}

/* ===== APPLICATION-SPECIFIC STYLES ===== */
@layer components {
  /* App Header Specific Styling */
  #app > header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    container-type: inline-size;
    max-width: var(--container-xl);
    margin-inline: auto;
    width: 100%;
  }

  @container (max-width: 640px) {
    #app > header {
      flex-direction: column;
      gap: var(--space-md);
      text-align: center;
    }

    #app > header nav {
      justify-content: center;
    }
  }

  /* Main content improvements */
  main {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  /* Enhanced Home View Layout */
  main > article {
    margin-bottom: var(--space-2xl);
  }

  main > article > header {
    margin-bottom: var(--space-xl);
    padding-bottom: var(--space-lg);
    border-bottom: 2px solid var(--color-border);
  }

  /* Legacy Section Headers - Override for content sections */
  main > article > section:not(.content-section) > h2 {
    margin: 0 0 var(--space-lg) 0;
    color: var(--color-text);
    font-weight: var(--font-weight-semibold);
    position: relative;
    padding-left: var(--space-md);
  }

  main > article > section:not(.content-section) > h2::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 24px;
    background-color: var(--color-primary);
    border-radius: var(--radius-sm);
  }

  @container (max-width: 768px) {
    main > article > header {
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
    }
  }

  /* Single column layout for empty states */
  .cards-container:has(> div:only-child) {
    grid-template-columns: 1fr;
    place-items: center;
  }

  @container (max-width: 1024px) {
    .cards-container {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @container (max-width: 640px) {
    .cards-container {
      grid-template-columns: 1fr;
    }
  }

  /* Enhanced Card styling for departments and services */
  main article article {
    transition: all var(--transition-fast);
    min-height: 240px;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
  }



  /* Enhanced Card header */
  main article article > header {
    flex-shrink: 0;
    padding: var(--space-lg);
    background-color: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    position: relative;
  }

  /* Status light positioning in card header */
  main article article > header > .status-light {
    position: absolute;
    top: var(--space-md);
    right: var(--space-md);
  }

  /* Card content area with better spacing */
  main article article > section {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: var(--space-lg);
    gap: var(--space-md);
  }

  main article article > div:not(header) {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: var(--space-lg);
  }

  /* Enhanced section headers */
  main article article > section > h4 {
    margin: 0 0 var(--space-md) 0;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    text-transform: uppercase;
    letter-spacing: 0.025em;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--space-xs);
  }

  /* Enhanced Staff list styling */
  main article article ul {
    gap: var(--space-sm);
    margin: 0;
    padding: 0;
  }

  /* Unified Week Bar Calendar Navigation */
  .calendar-nav {
    background: none;
    border: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 800px;
    margin: 0 auto;
  }

  /* Top Navigation Controls */
  .nav-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-xs);
    margin-bottom: 0;
    width: 100%;
  }

  .nav-arrow {
    width: 48px;
    height: 48px;
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    background-color: var(--color-surface-elevated);
    border: none;
    color: var(--color-text);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .nav-arrow:hover {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    transform: none;
    box-shadow: none;
  }

  .month-year {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    flex: 1;
    text-align: center;
  }

  .today-btn {
    padding: var(--space-md) var(--space-lg);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    background-color: var(--color-surface-elevated);
    border: 1px solid var(--color-border);
    color: var(--color-text-secondary);
    transition: all var(--transition-fast);
  }

  .today-btn:hover {
    background-color: var(--color-surface);
    color: var(--color-text);
    transform: none;
    box-shadow: none;
  }

  .today-btn.btn-primary {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    border-color: var(--color-primary);
  }

  .today-btn.btn-primary:hover {
    background-color: color-mix(in oklch, var(--color-primary) 90%, black);
  }

  /* Unified Week Bar */
  .week-bar {
    display: flex;
    gap: var(--space-xs);
    background: none;
    padding: var(--space-xs);
    width: 100%;
  }

  .day-button {
    flex: 1;
    padding: var(--space-lg);
    min-height: 56px;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    background-color: var(--color-surface-elevated);
    border: 1px solid var(--color-border);
    color: var(--color-text);
    transition: all var(--transition-fast);
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .day-button:hover {
    background-color: var(--color-surface);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }

  .day-button.day-weekend {
    background-color: color-mix(in oklch, var(--color-surface-elevated) 95%, var(--color-border));
    color: var(--color-text-secondary);
  }

  .day-button.day-weekend:hover {
    background-color: color-mix(in oklch, var(--color-surface) 95%, var(--color-border));
  }

  .day-button.day-selected {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    font-weight: var(--font-weight-bold);
  }

  .day-button.day-selected:hover {
    background-color: color-mix(in oklch, var(--color-primary) 90%, black);
  }

  .day-button.day-today:not(.day-selected) {
    background-color: var(--color-surface);
    color: var(--color-primary);
    font-weight: var(--font-weight-bold);
    position: relative;
  }

  .day-button.day-today:not(.day-selected)::after {
    content: '';
    position: absolute;
    bottom: 6px;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 3px;
    background-color: var(--color-primary);
    animation: pulse 2s infinite;
  }

  /* Smooth transitions and animations */
  .calendar-nav {
    animation: slideIn 0.3s ease-out;
  }

  .day-button:active {
    transform: scale(0.98);
  }

  .nav-arrow:active {
    transform: scale(0.95);
  }

  .today-btn:active {
    transform: scale(0.98);
  }

  /* Pulse animation for today indicator */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.6;
    }
  }

  /* Slide in animation */
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Focus styles for accessibility */
  .nav-arrow:focus-visible,
  .today-btn:focus-visible,
  .day-button:focus-visible {
    outline: 3px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* Responsive Calendar Navigation */
  @container (max-width: 640px) {
    .nav-controls {
      flex-wrap: wrap;
      gap: var(--space-sm);
    }

    .nav-arrow {
      width: 44px;
      height: 44px;
      font-size: var(--font-size-lg);
    }

    .month-year {
      font-size: var(--font-size-lg);
      order: -1;
      flex-basis: 100%;
      margin-bottom: var(--space-sm);
    }

    .today-btn {
      padding: var(--space-sm) var(--space-md);
      font-size: var(--font-size-sm);
    }

    .week-bar {
      border-width: 1px;
    }

    .day-button {
      min-height: 48px;
      font-size: var(--font-size-base);
      padding: var(--space-md);
    }
  }

  @container (max-width: 480px) {
    .nav-controls {
      justify-content: center;
    }

    .day-button {
      min-height: 44px;
      font-size: var(--font-size-sm);
      padding: var(--space-sm);
    }
  }

  @media (max-width: 768px) {
    .page-header {
      padding: 0;
    }

    .content-header {
      flex-direction: column;
      align-items: stretch;
      gap: var(--space-md);
    }

    .header-actions {
      justify-content: flex-start;
    }

    .config-view > header nav {
      justify-content: stretch;
      flex-wrap: wrap;
    }

    .config-view > header nav a {
      flex: 1;
      min-width: 120px;
    }

    .staff-header {
      flex-direction: column;
      gap: var(--space-md);
    }

    .staff-tabs {
      justify-content: flex-start;
      flex-wrap: wrap;
      flex: none;
    }

    .staff-tabs button {
      flex: none;
      min-width: 100px;
    }
  }

  /* Config View Tabs - Tab Design */
  .config-view > header nav {
    background: none;
    border: none;
    padding: 0;
    display: flex;
    justify-content: flex-end;
    border-bottom: 1px solid var(--color-border);
    gap: var(--space-xs);
  }

  .config-view > header nav a {
    padding: var(--space-md) var(--space-lg);
    text-align: center;
    background-color: var(--color-surface);
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: var(--font-weight-medium);
    transition: all var(--transition-fast);
    border: 1px solid var(--color-border);
    border-bottom: none;
    border-top-left-radius: var(--radius-md);
    border-top-right-radius: var(--radius-md);
    position: relative;
    top: 1px;
  }

  .config-view > header nav a:hover {
    background-color: var(--color-surface-elevated);
    color: var(--color-text);
    transform: translateY(-1px);
  }

  .config-view > header nav a.active {
    background-color: var(--color-surface-elevated);
    color: var(--color-primary);
    font-weight: var(--font-weight-semibold);
    border-bottom: 1px solid var(--color-surface-elevated);
    z-index: 1;
  }

  /* Modal Sizing */
  dialog.modal-sm {
    width: min(400px, 90vw);
  }

  dialog.modal-md {
    width: min(600px, 90vw);
  }

  dialog.modal-lg {
    width: min(800px, 90vw);
  }

  dialog.modal-xl {
    width: min(1200px, 90vw);
  }

  /* Loading and Error States */
  div:has(> p:only-child):where([class*="loading"], [class*="error"]) {
    text-align: center;
    padding: var(--space-xl);
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    color: var(--color-text-secondary);
  }

  /* Empty States */
  div:has(> p:first-child):has(> button:last-child) {
    text-align: center;
    padding: var(--space-xl);
    background-color: var(--color-surface);
    border: 2px dashed var(--color-border);
    border-radius: var(--radius-lg);
    color: var(--color-text-secondary);
  }

  div:has(> p:first-child):has(> button:last-child) button {
    margin-top: var(--space-md);
  }

  /* Typography Improvements */
  h1, h2, h3, h4, h5, h6 {
    line-height: 1.3;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
  }

  h1 { font-size: var(--font-size-2xl); }
  h2 { font-size: var(--font-size-xl); }
  h3 { font-size: var(--font-size-lg); }
  h4 { font-size: var(--font-size-base); }
  h5 { font-size: var(--font-size-sm); }
  h6 { font-size: var(--font-size-xs); }

  p {
    line-height: 1.6;
    color: var(--color-text-secondary);
  }

  /* Focus Management */
  :focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* Smooth Scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Print Styles */
  @media print {
    * {
      background: transparent !important;
      color: black !important;
      box-shadow: none !important;
      text-shadow: none !important;
    }

    header nav,
    button,
    .no-print {
      display: none !important;
    }

    article {
      border: 1px solid #000 !important;
      page-break-inside: avoid;
    }
  }
